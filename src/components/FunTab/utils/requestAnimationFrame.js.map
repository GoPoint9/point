{"version":3,"file":"requestAnimationFrame.js","sources":["../../../../src/utils/requestAnimationFrame.ts"],"sourcesContent":["interface IndexableWindow {\n\t/* eslint-disable @typescript-eslint/no-explicit-any */\n\t[key: string]: any;\n}\nconst win = window as IndexableWindow;\n\nexport function windowInit() {\n\tlet lastTime = 0;\n\tconst vendors = ['webkit', 'moz'];\n\tfor (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = win[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame =\n\t\t\twin[vendors[x] + 'CancelAnimationFrame'] || // name has changed in Webkit\n\t\t\twin[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\n\tif (!window.requestAnimationFrame) {\n\t\twindow.requestAnimationFrame = function (callback) {\n\t\t\tconst currTime = Date.now();\n\t\t\t// 刷新间隔16.7ms（每秒60次刷新）\n\t\t\tconst interval = currTime - lastTime;\n\t\t\tconst timeToCall = Math.max(0, 16.7 - interval);\n\t\t\tconst id = window.setTimeout(function () {\n\t\t\t\tcallback(interval);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\t}\n\tif (!window.cancelAnimationFrame) {\n\t\twindow.cancelAnimationFrame = function (id) {\n\t\t\tclearTimeout(id);\n\t\t};\n\t}\n}\n"],"names":[],"mappings":"AAAA,MAAM,GAAG,GAAG,MAAM,CAAC;AACZ,SAAS,UAAU,GAAG;AAC7B,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC;AACnB,EAAE,MAAM,OAAO,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;AACpC,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE;AAC5E,IAAI,MAAM,CAAC,qBAAqB,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,CAAC;AAC7E,IAAI,MAAM,CAAC,oBAAoB,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,sBAAsB,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,6BAA6B,CAAC,CAAC;AAC9H,GAAG;AACH,EAAE,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE;AACrC,IAAI,MAAM,CAAC,qBAAqB,GAAG,SAAS,QAAQ,EAAE;AACtD,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AAClC,MAAM,MAAM,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;AAC3C,MAAM,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,QAAQ,CAAC,CAAC;AACtD,MAAM,MAAM,EAAE,GAAG,MAAM,CAAC,UAAU,CAAC,WAAW;AAC9C,QAAQ,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC3B,OAAO,EAAE,UAAU,CAAC,CAAC;AACrB,MAAM,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAC;AACvC,MAAM,OAAO,EAAE,CAAC;AAChB,KAAK,CAAC;AACN,GAAG;AACH,EAAE,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE;AACpC,IAAI,MAAM,CAAC,oBAAoB,GAAG,SAAS,EAAE,EAAE;AAC/C,MAAM,YAAY,CAAC,EAAE,CAAC,CAAC;AACvB,KAAK,CAAC;AACN,GAAG;AACH;;;;"}